"use strict";(self.webpackChunktfin_ui_project_template=self.webpackChunktfin_ui_project_template||[]).push([[368],{1368:function(e,t,n){n.r(t);var o=n(2672),r=n.n(o),s=n(1250),i=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),s(e),i(e)}))},a=n(7757),l=n.n(a),c=n(5861),d=n(1413),u=n(4925),p=n(5671),h=n(3144),f=n(9340),C=n(5716),g=n(1694),v=n.n(g),w=n(877),x=n(5154),m=n(2330),k=n(6202),Z=n(6472),S=n(2889),b=n(5996),j=n(4113),y=n(3170),E=n(8810),_=n(9306),T=n(2496),W=n(9468),A=n(9551),P=(n(2336),n(184)),L=["contextCls"],I=["contextCls"],M=["contextCls"],O=["isAgentOnline"],R=function(e){(0,f.Z)(o,e);var t=(0,C.Z)(o);function o(){var e;(0,p.Z)(this,o);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isLoading:!0,shouldShowChooseOptionWindow:!1,hasError:!1,shouldShowHoopWindow:!1,isI18nReady:!1},e.renderContent=function(){var t=e.state,n=t.shouldShowChooseOptionWindow,o=t.shouldShowHoopWindow,r=e.props.contextCls;return(0,P.jsxs)("div",{className:v()(e.baseCls,r),children:[n&&e.renderChooseOptionWindow(),o&&e.renderHoopWindow()]})},e.renderHoopWindow=function(){var t=e.props,n=(t.contextCls,(0,u.Z)(t,L)),o=e.state.chatConfigs,r=null!==o&&void 0!==o?o:{},s=r.hoop,i=r.isLeaveAgentMessageEnabled;return(0,P.jsx)(Z.Z,(0,d.Z)((0,d.Z)({},n),{},{contextCls:"".concat(e.baseCls,"__hoop"),hoop:s,isLeaveAgentMessageEnabled:i},o))},e.renderChooseOptionWindow=function(){var t=e.props,n=(t.contextCls,(0,u.Z)(t,I)),o=e.state.chatConfigs,r=(null!==o&&void 0!==o?o:{}).ewt;return(0,P.jsx)(m.Z,(0,d.Z)((0,d.Z)({},n),{},{contextCls:"".concat(e.baseCls,"__choose-option-window"),ewt:r},o))},e.renderErrorPage=function(){var t=e.props,n=(t.contextCls,(0,u.Z)(t,M)),o=(0,w.i0)("chatModule.errorPage.title"),r=(0,w.i0)("chatModule.errorPage.headText"),s=(0,w.i0)("chatModule.errorPage.subText");return(0,P.jsx)(k.Z,(0,d.Z)((0,d.Z)({},n),{},{contextCls:"".concat(e.baseCls,"__generic-message"),icon:b.Z.WARNING,windowTitle:o,headText:r,subText:s}))},e.renderLoading=function(){var t=Object.assign({},e.props),n=(0,w.i0)("chatModule.loading.title");return(0,P.jsx)(S.Z,(0,d.Z)((0,d.Z)({},t),{},{contextCls:"".concat(e.baseCls,"__loading"),title:n,shouldShowCloseBtn:!0}))},e.fetchConfig=(0,c.Z)(l().mark((function t(){var n,o,r,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={isLoading:!1},t.prev=1,t.next=4,(0,y.$D)();case 4:o=t.sent,r=o.isAgentOnline,s=(0,u.Z)(o,O),n.chatConfigs=s,r?n.shouldShowChooseOptionWindow=!0:n.shouldShowHoopWindow=!0,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n.hasError=!0;case 13:return t.prev=13,e.setState(n),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))),e.initialSetup=function(){var t=e.props,n=t.accessToken,o=t.applicationId,r=t.platform,s=t.env,i=t.brand;n&&(0,_.M8)(n),o&&(0,_.u0)(o),r&&(0,T.VY)(r.toUpperCase()),s&&((0,_.Nb)(s.toUpperCase()),A.Z.Environment=s.toUpperCase(),(0,_.S9)(W.G0[(0,T.Xf)()][(0,_.dU)()])),i&&(A.Z.Brand=i)},e.initI18n=(0,c.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.YV)({defaultTranslations:{"en-US":function(){return n.e(661).then(n.t.bind(n,6661,19))}},shouldLoadStrings:!1});case 2:e.setState({isI18nReady:!0});case 3:case"end":return t.stop()}}),t)}))),e.applyDesignToken=function(){var t=e.props.brand;(0,E.p)(t),e.setState({isDesignTokenApplied:!0})},e.setContainerElementStyle=function(){var t=e.props.containerElement;t&&(e.setState({originContainerElementPosition:t.style.position}),t.style.position="relative")},e.restoreContainerElementStyle=function(){var t=e.props.containerElement,n=e.state.originContainerElementPosition;t&&n&&(t.style.position=n)},e.destoryClient=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.lu();case 2:case"end":return e.stop()}}),e)}))),e.baseCls="web-chat-module",e}return(0,h.Z)(o,[{key:"render",value:function(){var e=this.state,t=e.isDesignTokenApplied,n=e.isLoading,o=e.hasError,r=e.isI18nReady;return t&&r&&(0,P.jsx)(x.Z,{contextCls:"".concat(this.baseCls,"__loading"),isLoading:n,hasError:o,renderLoadingState:this.renderLoading,renderErrorState:this.renderErrorPage,children:this.renderContent()})}},{key:"componentDidMount",value:function(){this.initI18n(),this.initialSetup(),this.setContainerElementStyle(),this.fetchConfig(),this.applyDesignToken()}},{key:"componentWillUnmount",value:function(){this.restoreContainerElementStyle(),this.destoryClient(),(0,_.cG)()}}]),o}(o.PureComponent);R.defaultProps={onChatWidgetClose:function(){return Promise.resolve()},platform:W.iw.BAAS,brand:W.cg.GO2BANK,env:W.Gv.PROD};var D=R;var B=document.getElementById("root");s.createRoot(B).render((0,P.jsxs)(r().StrictMode,{children:[(0,P.jsx)("div",{children:"Test Widget Page, when invoke the wiget, we should expose the ChatModule only and set the containerElement to which element in the existing page"}),(0,P.jsx)(D,{containerElement:B,accessToken:"ajkdjkljaklsjdfkljaklsdjfljksdajlf",brand:"go2bank",accountIdentifier:"adjkajsdlfjlkajsd",onChatWidgetClose:function(){console.log("Chat window has been closed")},applicationId:"10001",env:"QA",platform:"BAAS"})]})),i()},1250:function(e,t,n){var o=n(4556);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot}}]);
//# sourceMappingURL=368.ae91713d.chunk.js.map