"use strict";(self.webpackChunktfin_ui_project_template=self.webpackChunktfin_ui_project_template||[]).push([[476],{2330:function(e,n,t){t.d(n,{Z:function(){return xe}});var r=t(1413),a=t(4925),o=t(5671),s=t(3144),i=t(9340),c=t(2882),l=t(2672),u=t(1694),d=t.n(u),h=t(6996),p=t(7876),C=t(6598),m=t(8491),g=t(6746),f=t(3356),v=t(4165),x=t(5861),w=t(537),b=t(2810),Z=t(7996),S=t(6202),M=t(4113),E=t(5785),y=t(7441),k=t(813),I=t(6363),_=t(4942),B=t(1909),T=t(184),A=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).baseCls="web-chat-bubble-right-tail",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls;return(0,T.jsx)("svg",{className:d()(this.baseCls,e),width:"12",height:"15",viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,T.jsx)("path",{d:"M-0.000148773 0H5.99985C5.99985 4.82743 5.65399 12.7323 11.1514 15C4.94531 15 0.969548 12.3333 -0.000148773 11V0Z",fill:"currentColor"})})}}]),t}(l.PureComponent),W=A,L=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).baseCls="web-chat-bubble-left-tail",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls;return(0,T.jsx)("svg",{className:d()(this.baseCls,e),width:"11",height:"15",viewBox:"0 0 11 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,T.jsx)("path",{d:"M11 0H5C5 4.86555 5.60812 12.6867 0 15C6.20606 15 10.0303 12.3333 11 11V0Z",fill:"currentColor"})})}}]),t}(l.PureComponent),j=L,O=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).renderActions=function(){var n=e.props.index;return(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__actions-container"),children:[(0,T.jsx)("span",{className:"".concat(e.baseCls,"__actions-text"),children:(0,m.i0)("chatTextBubble.actionsContainerText")}),(0,T.jsx)(B.Z,{contextCls:"".concat(e.baseCls,"__actions-link-retry"),text:(0,m.i0)("chatTextBubble.actionsContainer.retryLinkButtonText"),data:{index:n},onClick:e.handleRetryClick,"aria-label":(0,m.i0)("chatTextBubble.actionsContainer.retryLinkButtonAriaLabel")}),(0,T.jsx)("span",{className:"".concat(e.baseCls,"__actions-divider"),children:(0,m.i0)("chatTextBubble.actionsContainer.dividerText")}),(0,T.jsx)(B.Z,{contextCls:"".concat(e.baseCls,"__actions-link-remove"),text:(0,m.i0)("chatTextBubble.actionsContainer.removeLinkButtonText"),data:{index:n},onClick:e.handleRemoveClick,"aria-label":(0,m.i0)("chatTextBubble.actionsContainer.removeLinkButtonAriaLabel")})]})},e.renderTail=function(){var n=e.props.isTextFromMe?W:j;return(0,T.jsx)(n,{contextCls:"".concat(e.baseCls,"__tail")})},e.handleRetryClick=function(n){var t=e.props.onRetry;t&&t(n)},e.handleRemoveClick=function(n){var t=e.props.onRemove;t&&t(n)},e.getModCls=function(){var n,t=e.props.isTextFromMe;return n={},(0,_.Z)(n,"".concat(e.baseCls,"--from-me"),t),(0,_.Z)(n,"".concat(e.baseCls,"--from-other"),!t),(0,_.Z)(n,"".concat(e.baseCls,"--tail-right"),t),(0,_.Z)(n,"".concat(e.baseCls,"--tail-left"),!t),n},e.baseCls="web-chat-text-bubble",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.contextCls,t=e.text,r=e.children,a=e.id,o=e.isFailed,s=e.isTextFromMe,i=this.getModCls();return(0,T.jsx)("div",{className:d()(this.baseCls,n),children:(0,T.jsxs)("div",{className:"".concat(this.baseCls,"__bubble-actions-container"),children:[(0,T.jsx)("div",{id:a,className:d()(this.baseCls,i,n),children:(0,T.jsxs)("div",{className:"".concat(this.baseCls,"__bubble-container"),children:[null!==t&&void 0!==t?t:r,this.renderTail()]})}),s&&o&&this.renderActions()]})})}}]),t}(l.PureComponent);O.defaultProps={isTextFromMe:!0};var P=O,N=t(6726),R=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).baseCls="web-chat-typing-bubble",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls;return(0,T.jsx)("div",{className:d()(this.baseCls,e),children:(0,T.jsxs)("div",{className:"".concat(this.baseCls,"__bubble-container"),children:[(0,T.jsx)(N.Z,{}),(0,T.jsx)(j,{contextCls:"".concat(this.baseCls,"__tail")})]})})}}]),t}(l.PureComponent),F=R,z=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).baseCls="web-chat-svg-image",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls;return(0,T.jsx)("svg",{className:d()(this.baseCls,e),width:"35",height:"28",viewBox:"0 0 35 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,T.jsx)("path",{d:"M29.1668 0.666626H5.8335C4.50741 0.666626 3.23564 1.19341 2.29796 2.13109C1.36028 3.06877 0.833496 4.34054 0.833496 5.66663V22.3333C0.833496 23.6594 1.36028 24.9311 2.29796 25.8688C3.23564 26.8065 4.50741 27.3333 5.8335 27.3333H29.1668C30.4929 27.3333 31.7647 26.8065 32.7024 25.8688C33.64 24.9311 34.1668 23.6594 34.1668 22.3333V5.66663C34.1668 4.34054 33.64 3.06877 32.7024 2.13109C31.7647 1.19341 30.4929 0.666626 29.1668 0.666626ZM5.8335 24C5.39147 24 4.96755 23.8244 4.65499 23.5118C4.34242 23.1992 4.16683 22.7753 4.16683 22.3333V18.3L9.66683 12.8166C9.97838 12.5112 10.3972 12.3402 10.8335 12.3402C11.2698 12.3402 11.6886 12.5112 12.0002 12.8166L23.1835 24H5.8335ZM30.8335 22.3333C30.8335 22.7753 30.6579 23.1992 30.3453 23.5118C30.0328 23.8244 29.6089 24 29.1668 24H27.8835L21.5335 17.6166L23.0002 16.15C23.3117 15.8446 23.7306 15.6735 24.1668 15.6735C24.6031 15.6735 25.0219 15.8446 25.3335 16.15L30.8335 21.6333V22.3333ZM30.8335 16.9333L27.7002 13.8166C26.7503 12.904 25.4841 12.3943 24.1668 12.3943C22.8496 12.3943 21.5834 12.904 20.6335 13.8166L19.1668 15.2833L14.3668 10.4833C13.4169 9.57068 12.1508 9.061 10.8335 9.061C9.51624 9.061 8.25007 9.57068 7.30016 10.4833L4.16683 13.6V5.66663C4.16683 5.2246 4.34242 4.80068 4.65499 4.48811C4.96755 4.17555 5.39147 3.99996 5.8335 3.99996H29.1668C29.6089 3.99996 30.0328 4.17555 30.3453 4.48811C30.6579 4.80068 30.8335 5.2246 30.8335 5.66663V16.9333Z",fill:"currentColor"})})}}]),t}(l.PureComponent),D=z,U=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).baseCls="web-chat-svg-image-slash",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls;return(0,T.jsx)("svg",{className:d()(this.baseCls,e),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,T.jsx)("path",{d:"M19.5002 4.00006H10.0002C9.73497 4.00006 9.48062 4.10542 9.29308 4.29296C9.10554 4.48049 9.00019 4.73485 9.00019 5.00006C9.00019 5.26528 9.10554 5.51963 9.29308 5.70717C9.48062 5.89471 9.73497 6.00006 10.0002 6.00006H19.5002C19.7654 6.00006 20.0198 6.10542 20.2073 6.29296C20.3948 6.48049 20.5002 6.73485 20.5002 7.00006V13.7601L18.6202 11.8801C18.2987 11.5603 17.909 11.3175 17.4802 11.1701C17.3554 11.128 17.2236 11.111 17.0923 11.1199C16.9609 11.1288 16.8326 11.1635 16.7147 11.222C16.5968 11.2805 16.4915 11.3617 16.405 11.4609C16.3184 11.5601 16.2522 11.6753 16.2102 11.8001C16.1682 11.9248 16.1511 12.0566 16.16 12.188C16.169 12.3193 16.2037 12.4476 16.2622 12.5655C16.3207 12.6835 16.4018 12.7887 16.501 12.8753C16.6002 12.9619 16.7154 13.028 16.8402 13.0701C16.9784 13.1136 17.1026 13.1929 17.2002 13.3001L20.5102 16.5901C20.5045 16.6399 20.5045 16.6902 20.5102 16.7401C20.5057 16.79 20.5057 16.8402 20.5102 16.8901C20.5478 16.954 20.5913 17.0143 20.6402 17.0701C20.6646 17.111 20.6949 17.1481 20.7302 17.1801C20.7902 17.2356 20.8575 17.2827 20.9302 17.3201C20.9647 17.3438 21.0015 17.364 21.0402 17.3801C21.1565 17.4324 21.2826 17.4596 21.4102 17.4601C21.6754 17.4601 21.9298 17.3547 22.1173 17.1672C22.3048 16.9796 22.4102 16.7253 22.4102 16.4601V7.00006C22.4105 6.21976 22.1068 5.47003 21.5636 4.90994C21.0203 4.34985 20.2801 4.02347 19.5002 4.00006V4.00006ZM3.21019 2.29006C3.02188 2.10176 2.76649 1.99597 2.50019 1.99597C2.23388 1.99597 1.97849 2.10176 1.79019 2.29006C1.60188 2.47837 1.49609 2.73376 1.49609 3.00006C1.49609 3.26636 1.60188 3.52176 1.79019 3.71006L3.18019 5.10006C2.74092 5.63587 2.50065 6.30721 2.50019 7.00006V17.0001C2.50019 17.7957 2.81626 18.5588 3.37887 19.1214C3.94147 19.684 4.70454 20.0001 5.50019 20.0001H18.0902L19.7902 21.7101C19.8831 21.8038 19.9937 21.8782 20.1156 21.929C20.2375 21.9797 20.3682 22.0059 20.5002 22.0059C20.6322 22.0059 20.7629 21.9797 20.8848 21.929C21.0066 21.8782 21.1172 21.8038 21.2102 21.7101C21.3039 21.6171 21.3783 21.5065 21.4291 21.3846C21.4798 21.2628 21.506 21.1321 21.506 21.0001C21.506 20.8681 21.4798 20.7373 21.4291 20.6155C21.3783 20.4936 21.3039 20.383 21.2102 20.2901L3.21019 2.29006ZM4.50019 7.00006C4.50263 6.83931 4.54379 6.68152 4.62019 6.54006L7.34019 9.25006C6.96837 9.39167 6.62845 9.60583 6.34019 9.88006L4.50019 11.7601V7.00006ZM5.50019 18.0001C5.23497 18.0001 4.98062 17.8947 4.79308 17.7072C4.60554 17.5196 4.50019 17.2653 4.50019 17.0001V14.5801L7.80019 11.2901C7.98711 11.1068 8.23843 11.0042 8.50019 11.0042C8.76194 11.0042 9.01326 11.1068 9.20019 11.2901L15.9102 18.0001H5.50019Z",fill:"#666666"})})}}]),t}(l.PureComponent),H=U,G=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={isLoading:!0,isImageFetchFailedFromOther:!1},e.renderLoading=function(){var n=e.state.isImageFetchFailedFromOther,t=e.props,r=t.contextCls,a=t.isFromOther,o=t.media,s=t.index,i=t.isFailed,c=o.sid,l=e.getModCls();return(0,T.jsx)("div",{id:c,className:d()(e.baseCls,l,r),children:(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__loading-actions-container"),children:[(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__loading-container"),children:[(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__loading-bubble"),children:[a&&n?e.renderBrokenImageIcon():e.renderDefaultImageIcon(),a&&!n&&e.renderLoadingImageFromOtherStatus(),!a&&e.renderTail()]}),(0,T.jsx)("div",{className:"".concat(e.baseCls,"__uploading-status"),children:s&&!i&&(0,m.i0)("chatImageBubble.uploadingStatus.text")})]}),i&&e.renderActions(),a&&n&&e.renderRetryFetchImageAction()]})})},e.renderActions=function(){var n=e.props.index;return(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__actions-container"),children:[(0,T.jsx)("span",{className:"".concat(e.baseCls,"__actions-text"),children:(0,m.i0)("chatImageBubble.actionsContainerText")}),(0,T.jsx)(B.Z,{contextCls:"".concat(e.baseCls,"__actions-link-retry"),text:(0,m.i0)("chatImageBubble.actionsContainer.retryLinkButtonText"),data:{index:n},onClick:e.handleRetryClick,"aria-label":(0,m.i0)("chatImageBubble.actionsContainer.retryLinkButtonAriaLabel")}),(0,T.jsx)("span",{className:"".concat(e.baseCls,"__actions-divider"),children:(0,m.i0)("chatImageBubble.actionsContainer.dividerText")}),(0,T.jsx)(B.Z,{contextCls:"".concat(e.baseCls,"__actions-link-remove"),text:(0,m.i0)("chatImageBubble.actionsContainer.removeLinkButtonText"),data:{index:n},onClick:e.handleRemoveClick,"aria-label":(0,m.i0)("chatImageBubble.actionsContainer.removeLinkButtonAriaLabel")})]})},e.renderRetryFetchImageAction=function(){return(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__actions-container"),children:[(0,T.jsx)("span",{className:"".concat(e.baseCls,"__actions-text"),children:(0,m.i0)("chatImageBubble.actionsFromOtherContainerText")}),(0,T.jsx)(B.Z,{contextCls:"".concat(e.baseCls,"__actions-link-retry"),text:(0,m.i0)("chatImageBubble.actionsContainer.retryLinkButtonText"),onClick:e.handleRetryLoadingImageFromOtherClick,"aria-label":(0,m.i0)("chatImageBubble.actionsContainer.retryLinkButtonAriaLabel")})]})},e.renderImageThumbnail=function(){var n=e.state.mediaUrl,t=e.props,r=t.contextCls,a=t.media,o=a.sid,s=a.filename,i=e.getModCls();return(0,T.jsx)("div",{id:o,className:d()(e.baseCls,i,r),children:(0,T.jsxs)("a",{className:"".concat(e.baseCls,"__bubble-thumbnail-container"),href:n,target:"_blank","aria-label":(0,m.i0)("chatImageBubble.img"),children:[(0,T.jsx)("div",{className:"".concat(e.baseCls,"__thumbnail-container"),children:(0,T.jsx)("img",{className:"".concat(e.baseCls,"__thumbnail"),width:"100%",height:"100%",src:n,alt:"".concat(s)})}),(0,T.jsx)("div",{className:"".concat(e.baseCls,"__modal-scrim"),children:(0,T.jsxs)("div",{className:"".concat(e.baseCls,"__modal-scrim-content"),children:[e.renderDefaultImageIcon(),(0,T.jsx)("div",{className:"".concat(e.baseCls,"__modal-scrim-hint"),children:(0,m.i0)("chatImageBubble.img")})]})})]})})},e.renderDefaultImageIcon=function(){return(0,T.jsx)(D,{})},e.renderBrokenImageIcon=function(){return(0,T.jsx)(H,{})},e.renderLoadingImageFromOtherStatus=function(){return(0,T.jsx)("p",{className:"".concat(e.baseCls,"__loading-image-from-other-status"),children:(0,m.i0)("chatImageBubble.imageLoadingFromOtherStatus.text")})},e.renderTail=function(){var n=e.props.isFromOther?j:W;return(0,T.jsx)(n,{contextCls:"".concat(e.baseCls,"__tail")})},e.handleRetryClick=function(n){var t=e.props.onRetry;t&&t(n)},e.handleRemoveClick=function(n){var t=e.props.onRemove;t&&t(n)},e.handleRetryLoadingImageFromOtherClick=function(){e.setState({isLoading:!0,isImageFetchFailedFromOther:!1}),e.loadMedia()},e.getModCls=function(){var n,t=e.props.isFromOther;return n={},(0,_.Z)(n,"".concat(e.baseCls,"--from-me"),!t),(0,_.Z)(n,"".concat(e.baseCls,"--from-other"),t),n},e.loadMedia=(0,x.Z)((0,v.Z)().mark((function n(){var t,r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.props.media,r={},n.prev=2,n.next=5,t.getContentTemporaryUrl();case 5:(a=n.sent)?(r.mediaUrl=a,r.isLoading=!1,r.isImageFetchFailedFromOther=!1):r.isImageFetchFailedFromOther=!0,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),r.isImageFetchFailedFromOther=!0;case 12:return n.prev=12,e.setState(r),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,9,12,15]])}))),e.baseCls="web-chat-image-bubble",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls,n=this.state.isLoading;return(0,T.jsxs)("div",{className:d()(this.baseCls,e),children:[n&&this.renderLoading(),!n&&this.renderImageThumbnail()]})}},{key:"componentDidMount",value:function(){this.loadMedia()}}]),t}(l.PureComponent);G.defaultProps={isFromOther:!1};var K=G,V=t(6389),Y=t(3626),q=t(1301),Q={UPLOAD_FILE_SIZE_MB_LIMITATION:16,UPLOAD_FILE_TYPE_LIMITATION:"jpg jpeg png",UPLOAD_FILE_WARNING_REASON:{UPLOAD_FILE_WARNING_SIZE:"uploadWarningSize",UPLOAD_FILE_WARNING_TYPE:"uploadWarningType"},MEDIA:"media"},X=t(8974),J=t(5996),$=t(7851),ee=["contextCls"],ne=["contextCls"],te=["contextCls"],re=["contextCls"],ae=w.Z.PRIMARY,oe=w.Z.SECONDARY,se=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(e){var s;(0,o.Z)(this,t),(s=n.call(this,e)).state={messages:[],messagesFromMe:[],shouldShowCounter:!1,count:0,isSendMessageBtnEnabled:!1,shouldShowTyping:!1,messageToSend:void 0,shouldShowChatWindow:!0,shouldShowConfirmModal:!1,shouldShowErrorWindow:!1,shouldShowChatExpiredWindow:!1,shouldShowChatEndedWindow:!1,shouldShowMinimizedIconButton:!1,scrollToBottom:!1,shouldShowUploadWarningModal:!1,uploadWarningReason:void 0},s.renderConfirmModal=function(){var e=s.props.contextCls,n=[{variant:ae,text:(0,m.i0)("chatWindow.modal.primaryBtn.text"),ariaLabel:(0,m.i0)("chatWindow.modal.primaryBtn.text"),onClick:s.handleModalPrimaryBtnClick},{variant:oe,text:(0,m.i0)("chatWindow.modal.secondaryBtn.text"),ariaLabel:(0,m.i0)("chatWindow.modal.secondaryBtn.text"),onClick:s.handleModalSecondaryBtnClick}];return s.webChatChatWindowElement=document.querySelector(".eureka-tile"),(0,T.jsx)(q.Z,{contextCls:d()("".concat(s.baseCls,"__modal-wrapper"),e),modalActions:n,renderTo:s.modalWapperRenderToElement,appElement:s.webChatChatWindowElement,iconName:X.H.EurekaCircleX,iconType:X.G.INFO,title:(0,m.i0)("chatWindow.modal.title")})},s.renderErrorPage=function(){var e=s.props,n=(e.contextCls,(0,a.Z)(e,ee)),t=(0,m.i0)("chatWindow.errorPage.title"),o=(0,m.i0)("chatWindow.errorPage.headText"),i=(0,m.i0)("chatWindow.errorPage.subText");return(0,T.jsx)(S.Z,(0,r.Z)((0,r.Z)({},n),{},{contextCls:"".concat(s.baseCls,"__chat-error-window"),icon:J.Z.WARNING,windowTitle:t,headText:o,subText:i}))},s.renderCounter=function(){var e=s.props.msgMaxLength;return(0,T.jsx)("div",{className:"".concat(s.baseCls,"__counter-container"),children:(0,T.jsxs)("span",{children:[s.state.count,"/",e]})})},s.renderActions=function(){var e=s.state.isSendMessageBtnEnabled,n=Q.UPLOAD_FILE_TYPE_LIMITATION.split(" ").join(", .");return(0,T.jsxs)("div",{className:"".concat(s.baseCls,"__actions-container"),children:[(0,T.jsx)(y.Z,{contextCls:"".concat(s.baseCls,"__attach-btn"),renderIcon:s.renderAttachIcon,onChange:s.handleFileUpload,onClick:s.handleFileInputClick,fileTypes:".".concat(n)}),(0,T.jsx)(k.Z,{contextCls:"".concat(s.baseCls,"__send-btn"),renderIcon:s.renderArrowUpIcon,onClick:s.handleSendBtnClick,variant:ae,"aria-label":(0,m.i0)("chatWindow.actionsContainer.sendBtnAriaLabel"),isDisabled:!e})]})},s.renderAttachIcon=function(){return(0,T.jsx)($.Z,{filename:"attach.svg",alt:(0,m.i0)("chatImageBubble.imgAlt.attach")})},s.renderArrowUpIcon=function(){return(0,T.jsx)(I.Z,{})},s.renderAfter=function(){var e=s.state.shouldShowCounter;return(0,T.jsxs)("div",{className:"".concat(s.baseCls,"__after-control-container"),children:[e&&s.renderCounter(),s.renderActions()]})},s.renderUploadWarningModal=function(){var e=s.state.uploadWarningReason,n=[{variant:ae,text:(0,m.i0)("chatWindow.uploadWarningModal.primaryBtn.text"),ariaLabel:(0,m.i0)("chatWindow.uploadWarningModal.primaryBtn.text"),onClick:s.handleUploadModalPrimaryBtnClick}];return s.webChatChatWindowElement=document.querySelector(".eureka-tile"),(0,T.jsx)(q.Z,{contextCls:"".concat(s.baseCls,"__modal-wrapper"),modalActions:n,renderTo:s.modalWapperRenderToElement,appElement:s.webChatChatWindowElement,iconName:X.H.EurekaTriangleAlert,iconType:X.G.ERROR,title:(0,m.i0)("chatWindow.uploadWarningModal.title.".concat(e)),message:(0,m.i0)("chatWindow.uploadWarningModal.message.".concat(e))})},s.renderTextBubble=function(e){return e.author===(0,M.Bx)()||!e.state?(0,T.jsx)(P,{id:e.sid,text:e.body,index:e.index.toString(),isFailed:e.isFailed,onRetry:s.handleRetryClick,onRemove:s.handleRemoveClick},e.sid||e.index.toString()):(0,T.jsx)(P,{id:e.sid,text:e.body,isTextFromMe:!1},e.sid)},s.renderImageBubble=function(e){var n=e.media,t=Object.assign({},s.props);return e.author===(0,M.Bx)()||!e.state?(0,l.createElement)(K,(0,r.Z)((0,r.Z)({},t),{},{key:e.sid||e.index.toString(),index:e.index.toString(),isFailed:e.isFailed,onRetry:s.handleRetryClick,onRemove:s.handleRemoveClick,media:n})):(0,l.createElement)(K,(0,r.Z)((0,r.Z)({},t),{},{key:e.sid,media:n,isFromOther:!0}))},s.renderChatExpiredWindow=function(){var e=s.props,n=(e.contextCls,(0,a.Z)(e,ne)),t=(0,m.i0)("chatWindow.title"),o=(0,m.i0)("chatWindow.chatExpiredWindow.headText"),i=(0,m.i0)("chatWindow.chatExpiredWindow.subText");return(0,T.jsx)(S.Z,(0,r.Z)((0,r.Z)({},n),{},{contextCls:"".concat(s.baseCls,"__expired-window"),renderIcon:s.renderClockImage,windowTitle:t,headText:o,subText:i,shouldShowMinimizeBtn:!1}))},s.renderChatEndedWindow=function(){var e=s.props,n=(e.contextCls,(0,a.Z)(e,te)),t=(0,m.i0)("chatWindow.title"),o=(0,m.i0)("chatWindow.chatEndedWindow.headText");return(0,T.jsx)(S.Z,(0,r.Z)((0,r.Z)({},n),{},{contextCls:"".concat(s.baseCls,"__end-chat-window"),windowTitle:t,headText:o,shouldShowMinimizeBtn:!1}))},s.renderClockImage=function(){return(0,T.jsx)($.Z,{filename:"clock.svg",alt:(0,m.i0)("chatImageBubble.imgAlt.clock")})},s.renderIconButtonChat=function(){return(0,T.jsx)(V.Z,{contextCls:"".concat(s.baseCls,"__icon-button"),renderSvg:s.renderSvgChat,onClick:s.handleMinimizedIconBtnClick})},s.renderSvgChat=function(){return(0,T.jsx)($.Z,{filename:"chat.svg",alt:(0,m.i0)("chatImageBubble.imgAlt.chat")})},s.handleUploadModalPrimaryBtnClick=function(){s.setState({shouldShowUploadWarningModal:!1})},s.handleRetryClick=function(e){var n=e.data,t=s.state,r=t.messages,a=t.messagesFromMe,o=r.find((function(e){return e.index===n.index})),i=(0,b.Z)(),c={body:o.body,index:i,isFailed:!1,type:o.type,media:o.media};s.setState({messages:[].concat((0,E.Z)(r.filter((function(e){return e.index!==n.index}))),[c]),messagesFromMe:[].concat((0,E.Z)(a.filter((function(e){return e.index!==n.index}))),[c])},(function(){s.handleSendMessage(c)}))},s.handleRemoveClick=function(e){var n=e.data,t=s.state,r=t.messages,a=t.messagesFromMe;s.setState({messages:(0,E.Z)(r.filter((function(e){return e.index!==n.index}))),messagesFromMe:(0,E.Z)(a.filter((function(e){return e.index!==n.index})))})},s.handleFileInputClick=function(e){e.target.value=""},s.handleFileUpload=function(e){var n=e.e,t=e.files;if(null===t||void 0===t?void 0:t.length){var r=(0,E.Z)(t)[0],a=r.type.split("/");return-1===Q.UPLOAD_FILE_TYPE_LIMITATION.indexOf(a[a.length-1])?(n.preventDefault(),void s.setState({uploadWarningReason:Q.UPLOAD_FILE_WARNING_REASON.UPLOAD_FILE_WARNING_TYPE,shouldShowUploadWarningModal:!0})):r.size>1024*Q.UPLOAD_FILE_SIZE_MB_LIMITATION*1024?(n.preventDefault(),void s.setState({uploadWarningReason:Q.UPLOAD_FILE_WARNING_REASON.UPLOAD_FILE_WARNING_SIZE,shouldShowUploadWarningModal:!0})):void s.handleSingleFile(r)}},s.handleSingleFile=function(e){if(e){var n=(0,b.Z)(),t=new FormData;t.append("file",e);var r={body:{contentType:e.type,filename:e.name,media:t},type:Q.MEDIA,index:n,isFailed:!1,media:{sid:n,filename:e.name,getContentTemporaryUrl:function(){return Promise.resolve()}}};s.setState((function(e){var n=e.messagesFromMe,t=e.messages;return{messagesFromMe:[].concat((0,E.Z)(n),[r]),messages:[].concat((0,E.Z)(t),[r]),scrollToBottom:!0}}),(function(){s.handleSendMessage(r)}))}},s.handleSendMessage=function(){var e=(0,x.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setChatExpiredTimeout(),e.prev=1,e.next=4,(0,M.bG)(n);case 4:s.setState((function(e){return{messagesFromMe:e.messagesFromMe.filter((function(e){return e.index!==n.index})),scrollToBottom:!0}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s.setState((function(e){var t=e.messages,r=e.messagesFromMe,a=r.findIndex((function(e){return e.index===n.index}));a>-1&&(r[a].isFailed=!0);var o=t.findIndex((function(e){return e.index===n.index}));return o>-1&&(t[o].isFailed=!0),{messages:t,messagesFromMe:r,scrollToBottom:!0}}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}(),s.handleSendBtnClick=function(){var e=s.state,n=e.messages,t=e.messageToSend,r=e.messagesFromMe;if((null===t||void 0===t?void 0:t.length)>0){var a={body:t,index:(0,b.Z)(),isFailed:!1};s.setState({messagesFromMe:[].concat((0,E.Z)(r),[a]),messages:[].concat((0,E.Z)(n),[a]),count:0,isSendMessageBtnEnabled:!1,messageToSend:"",scrollToBottom:!0},(function(){s.handleSendMessage(a)}))}},s.handleResize=function(e){Math.floor(e.target.scrollHeight/s.adjustedLineHeight)>1?s.setState({shouldShowCounter:!0}):s.setState({shouldShowCounter:!1})},s.handleMessageChange=function(){var e=(0,x.Z)((0,v.Z)().mark((function e(n){var t,r,a,o,i,c;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.msgMaxLength,r=n.target.value,a=(null===r||void 0===r?void 0:r.length)||0,o=(null===r||void 0===r?void 0:r.trim().replace(/\n/g,"").length)>0,i={isSendMessageBtnEnabled:o},a<=t?(i.count=a,i.messageToSend=n.target.value):(i.count=t,i.messageToSend=n.target.value.slice(0,t)),s.setState(i),e.next=9,(0,M.cc)();case 9:return c=e.sent,e.next=12,c.typing();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s.handleKeyDown=function(e){var n=s.state.isSendMessageBtnEnabled;13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),n&&s.handleSendBtnClick())},s.handleKeyPress=function(e){return s.state.count!==s.props.msgMaxLength||(e.preventDefault(),!1)},s.handleTypingStarted=function(){s.handleTyping(!0)},s.handleTypingEnded=function(){s.handleTyping(!1)},s.handleTyping=function(e){s.setState({shouldShowTyping:e,scrollToBottom:!0})},s.handleCloseBtnClick=function(){s.setState({shouldShowConfirmModal:!0})},s.handleMinimizeBtnClick=function(){s.setState({shouldShowChatWindow:!1,shouldShowMinimizedIconButton:!0})},s.handleMinimizedIconBtnClick=function(){s.setState({shouldShowMinimizedIconButton:!1,shouldShowChatWindow:!0,scrollToBottom:!0})},s.handleMessageAdded=function(e){var n=s.state.messages,t=n.findIndex((function(n){return n.index===(null===e||void 0===e?void 0:e.attributes.index)}));t>-1?n.splice(t,1,e):n.push(e),s.setState({messages:(0,E.Z)(n),scrollToBottom:!0})},s.handleModalPrimaryBtnClick=(0,x.Z)((0,v.Z)().mark((function e(){var n;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({shouldShowConfirmModal:!1,shouldShowChatWindow:!1}),e.prev=1,e.next=4,(0,M.jw)();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),(n=s.props.onChatWidgetClose)&&n();case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),s.handleModalSecondaryBtnClick=function(){s.setState({shouldShowConfirmModal:!1})},s.handleChatEnded=(0,x.Z)((0,v.Z)().mark((function e(){var n;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.clearChatExpiredTimeOut(),n={shouldShowMinimizedIconButton:!1},s.isEndChatFromChatExpiredTimeout?n.shouldShowChatEndedWindow=!1:(n.shouldShowChatWindow=!1,n.shouldShowChatEndedWindow=!0),s.setState(n);case 4:case"end":return e.stop()}}),e)}))),s.getConversationChatHistory=(0,x.Z)((0,v.Z)().mark((function e(){var n,t,r;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={messages:[],shouldShowErrorWindow:!1,scrollToBottom:!0},e.prev=1,e.next=4,(0,M.cc)();case 4:return t=e.sent,e.next=7,t.getMessages(1e3);case 7:(r=e.sent)&&r.items&&(n.messages=r.items.filter((function(e){return e.type===Q.MEDIA||e.body}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.shouldShowErrorWindow=!0;case 14:return e.prev=14,s.setState(n),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),s.setChatExpiredTimeout=function(){var e=60*s.props.userInactiveInterval*1e3;s.clearChatExpiredTimeOut(),s.chatExpiredTimer=setTimeout((0,x.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.isEndChatFromChatExpiredTimeout=!0,e.next=4,(0,M.jw)();case 4:return e.prev=4,s.setState({shouldShowChatWindow:!1,shouldShowMinimizedIconButton:!1,shouldShowChatEndedWindow:!1,shouldShowChatExpiredWindow:!0}),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])}))),e)},s.clearChatExpiredTimeOut=function(){s.chatExpiredTimer&&clearTimeout(s.chatExpiredTimer)},s.attachConversationEvents=(0,x.Z)((0,v.Z)().mark((function e(){var n;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.cc)();case 2:return(n=e.sent).on(Z.ri.messageAdded,s.handleMessageAdded),n.on(Z.ri.typingStarted,s.handleTypingStarted),n.on(Z.ri.typingEnded,s.handleTypingEnded),e.next=8,(0,M.s3)();case 8:e.sent.on(Z.KU.conversationLeft,s.handleChatEnded);case 10:case"end":return e.stop()}}),e)}))),s.detachConversationEvents=(0,x.Z)((0,v.Z)().mark((function e(){var n;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.cc)();case 2:return(n=e.sent).off(Z.ri.messageAdded,s.handleMessageAdded),n.off(Z.ri.typingStarted,s.handleTypingStarted),n.off(Z.ri.typingEnded,s.handleTypingEnded),e.next=8,(0,M.s3)();case 8:e.sent.off(Z.KU.conversationLeft,s.handleChatEnded);case 10:case"end":return e.stop()}}),e)}))),s.scrollToBottom=function(){var e=document.getElementsByClassName("".concat(s.baseCls,"__messages-container"))[0];e&&(e.scrollTop=e.scrollHeight),s.setState({scrollToBottom:!1})},s.modalWapperRenderToElement=function(){return s.webChatChatWindowElement},s.baseCls="web-chat-window";var i,c=e.lineHeight,u=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),h=window.screen.width||0;return u&&h&&(i=Math.ceil(u/h)*c),s.adjustedLineHeight=i||c,s}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls,n=this.state,t=n.shouldShowChatWindow,r=n.shouldShowConfirmModal,a=n.shouldShowErrorWindow,o=n.shouldShowChatExpiredWindow,s=n.shouldShowChatEndedWindow,i=n.shouldShowUploadWarningModal,c=n.shouldShowMinimizedIconButton;return(0,T.jsxs)("div",{className:d()(this.baseCls,e),children:[t&&this.renderChatWindow(),r&&this.renderConfirmModal(),a&&this.renderErrorPage(),o&&this.renderChatExpiredWindow(),s&&this.renderChatEndedWindow(),i&&this.renderUploadWarningModal(),c&&this.renderIconButtonChat()]})}},{key:"componentDidUpdate",value:function(e,n){var t=this.state.scrollToBottom;!1===n.scrollToBottom&&!0===t&&this.scrollToBottom()}},{key:"componentDidMount",value:function(){this.getConversationChatHistory(),this.attachConversationEvents(),this.webChatChatWindowElement=document.querySelector(".eureka-tile"),this.setChatExpiredTimeout()}},{key:"componentWillUnmount",value:function(){this.detachConversationEvents(),this.clearChatExpiredTimeOut()}},{key:"renderChatWindow",value:function(){var e=this,n=this.props,t=(n.contextCls,(0,a.Z)(n,re)),o=this.state,s=o.messages,i=o.shouldShowTyping,c=o.messageToSend;return(0,T.jsx)(g.Z,(0,r.Z)((0,r.Z)({},t),{},{contextCls:"".concat(this.baseCls,"__chat-window-container"),title:(0,m.i0)("chatWindow.title"),shouldShowCloseBtn:!0,shouldShowMinimizeBtn:!0,onCloseBtnClick:this.handleCloseBtnClick,onMinimizeBtnClick:this.handleMinimizeBtnClick,children:(0,T.jsxs)("div",{className:"".concat(this.baseCls,"__chat-text-container"),children:[(0,T.jsxs)("div",{className:"".concat(this.baseCls,"__messages-container"),children:[s.map((function(n){return n.type===Q.MEDIA?e.renderImageBubble(n):e.renderTextBubble(n)})),i&&(0,T.jsx)(F,{})]}),(0,T.jsx)("div",{className:"".concat(this.baseCls,"__send-message-container"),children:(0,T.jsx)(Y.Z,{contextCls:"".concat(this.baseCls,"__message-input"),placeholder:(0,m.i0)("chatWindow.messageInputPlaceholder"),"aria-label":(0,m.i0)("chatWindow.messageInputAriaLabel"),onResize:this.handleResize,onChange:this.handleMessageChange,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,renderAfterControl:this.renderAfter,value:c,lineHeight:this.adjustedLineHeight})})]})}))}}]),t}(l.PureComponent);se.defaultProps={msgMaxLength:280,lineHeight:27,onChatWidgetClose:function(){return Promise.resolve()}};var ie=se,ce=["contextCls"],le=["contextCls"],ue=["contextCls"],de=w.Z.PRIMARY,he=w.Z.SECONDARY,pe=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return(e=n.call.apply(n,[this].concat(i))).state={shouldShowConnectingPage:!0,shouldShowErrorPage:!1,shouldShowChatWindowPage:!1,shouldShowIconButtonChat:!1,shouldShowConfirmModal:!1,isConnectingSuccess:!1},e.renderConnectingPage=function(){var n=e.props,t=(n.contextCls,(0,a.Z)(n,ce)),o=(0,m.i0)("chatConnectingWindow.connectingPage.title");return(0,T.jsx)(S.Z,(0,r.Z)((0,r.Z)({},t),{},{contextCls:"".concat(e.baseCls,"__chat-connecting-window"),renderIcon:e.renderWriteMessageIcon,headText:o,shouldShowMinimizeBtn:!0,onMinimizeBtnClick:e.handleMinimizeBtnClick,onCloseBtnClick:e.handleCloseBtnClick}))},e.renderChatWindowPage=function(){var n=e.props,t=(n.contextCls,(0,a.Z)(n,le));return(0,T.jsx)(ie,(0,r.Z)((0,r.Z)({},t),{},{contextCls:"".concat(e.baseCls,"__chat-window"),shouldShowMinimizeBtn:!0}))},e.renderErrorPage=function(){var n=e.props,t=(n.contextCls,(0,a.Z)(n,ue)),o=(0,m.i0)("chatConnectingWindow.errorPage.title"),s=(0,m.i0)("chatConnectingWindow.errorPage.text"),i=(0,m.i0)("chatConnectingWindow.errorPage.subText");return(0,T.jsx)(S.Z,(0,r.Z)((0,r.Z)({},t),{},{contextCls:"".concat(e.baseCls,"__chat-error-window"),icon:J.Z.WARNING,windowTitle:o,headText:s,subText:i}))},e.renderConfirmModal=function(){var n=e.props.contextCls,t=[{variant:de,text:(0,m.i0)("chatWindow.modal.primaryBtn.text"),ariaLabel:(0,m.i0)("chatWindow.modal.primaryBtn.text"),onClick:e.handleModalPrimaryBtnClick},{variant:he,text:(0,m.i0)("chatWindow.modal.secondaryBtn.text"),ariaLabel:(0,m.i0)("chatWindow.modal.secondaryBtn.text"),onClick:e.handleModalSecondaryBtnClick}];return e.webChatChatWindowElement=document.querySelector(".eureka-tile"),(0,T.jsx)(q.Z,{contextCls:d()("".concat(e.baseCls,"__modal-wrapper"),n),modalActions:t,renderTo:e.modalWapperRenderToElement,appElement:e.webChatChatWindowElement,iconName:X.H.EurekaCircleX,iconType:X.G.INFO,title:(0,m.i0)("chatWindow.modal.title")})},e.renderWriteMessageIcon=function(){var e=(0,m.i0)("chatConnectingWindow.imgAlt.writeAMessage");return(0,T.jsx)($.Z,{filename:"write-a-message.svg",alt:e})},e.renderSvgChat=function(){var e=(0,m.i0)("chatConnectingWindow.imgAlt.chat");return(0,T.jsx)($.Z,{filename:"chat.svg",alt:e})},e.renderIconButtonChat=function(){return(0,T.jsx)(V.Z,{contextCls:"".concat(e.baseCls,"__chat-icon-button"),renderSvg:e.renderSvgChat,onClick:e.handleMaximizeBtnClick})},e.handleJoined=function(){var n=e.state,t=n.shouldShowIconButtonChat,r=n.shouldShowConfirmModal,a={isConnectingSuccess:!0,shouldShowConnectingPage:!1,shouldShowErrorPage:!1,shouldShowChatWindowPage:!1,shouldShowIconButtonChat:!1,shouldShowConfirmModal:!1};t?a.shouldShowIconButtonChat=!0:r?(a.shouldShowConfirmModal=!0,a.shouldShowConnectingPage=!0):a.shouldShowChatWindowPage=!0,e.setState(a)},e.handleError=function(){e.setState({shouldShowConnectingPage:!1,shouldShowErrorPage:!0,shouldShowChatWindowPage:!1,shouldShowIconButtonChat:!1})},e.handleMinimizeBtnClick=function(){e.setState({shouldShowConnectingPage:!1,shouldShowErrorPage:!1,shouldShowChatWindowPage:!1,shouldShowIconButtonChat:!0})},e.handleMaximizeBtnClick=function(){var n={shouldShowConnectingPage:!1,shouldShowErrorPage:!1,shouldShowChatWindowPage:!1,shouldShowIconButtonChat:!1};e.state.isConnectingSuccess?n.shouldShowChatWindowPage=!0:n.shouldShowConnectingPage=!0,e.setState(n)},e.handleModalPrimaryBtnClick=(0,x.Z)((0,v.Z)().mark((function n(){var t,r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.setState({shouldShowConfirmModal:!1,shouldShowConnectingPage:!1}),t=e.state.isConnectingSuccess,n.prev=2,!t){n.next=6;break}return n.next=6,(0,M.jw)();case 6:return n.prev=6,(r=e.props.onChatWidgetClose)&&r(),n.finish(6);case 10:case"end":return n.stop()}}),n,null,[[2,,6,10]])}))),e.handleModalSecondaryBtnClick=function(){var n={shouldShowConfirmModal:!1,shouldShowChatWindowPage:!1,shouldShowConnectingPage:!1};e.state.isConnectingSuccess?n.shouldShowChatWindowPage=!0:n.shouldShowConnectingPage=!0,e.setState(n)},e.handleCloseBtnClick=function(){e.setState({shouldShowConfirmModal:!0})},e.initConversation=(0,x.Z)((0,v.Z)().mark((function n(){var t;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,M.cc)();case 3:return t=n.sent,n.next=6,t.getParticipantsCount();case 6:if(!(n.sent>1)){n.next=11;break}e.handleJoined(),n.next=14;break;case 11:return n.next=13,e.sendInitMessage();case 13:t.on(Z.ri.participantJoined,e.handleJoined);case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),e.handleError();case 19:case"end":return n.stop()}}),n,null,[[0,16]])}))),e.sendInitMessage=(0,x.Z)((0,v.Z)().mark((function e(){var n,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.Z)(),t={body:"",index:n,isFailed:!1},e.next=4,(0,M.bG)(t);case 4:case"end":return e.stop()}}),e)}))),e.detachConversationEvents=(0,x.Z)((0,v.Z)().mark((function n(){return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,M.cc)();case 3:n.sent.off(Z.ri.participantJoined,e.handleJoined),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.handleError();case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),e.modalWapperRenderToElement=function(){return e.webChatChatWindowElement},e.baseCls="web-chat-connecting-window",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.state,n=e.shouldShowConnectingPage,t=e.shouldShowErrorPage,r=e.shouldShowChatWindowPage,a=e.shouldShowIconButtonChat,o=e.shouldShowConfirmModal,s=this.props.contextCls;return(0,T.jsxs)("div",{className:d()(this.baseCls,s),children:[n&&this.renderConnectingPage(),r&&this.renderChatWindowPage(),t&&this.renderErrorPage(),a&&this.renderIconButtonChat(),o&&this.renderConfirmModal()]})}},{key:"componentDidMount",value:function(){this.initConversation(),this.webChatChatWindowElement=document.querySelector(".eureka-tile")}},{key:"componentWillUnmount",value:function(){this.detachConversationEvents()}}]),t}(l.PureComponent);pe.defaultProps={onChatWidgetClose:function(){return Promise.resolve()}};var Ce=pe,me=["contextCls"],ge=["contextCls"],fe=["contextCls"],ve=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(e){var s;(0,o.Z)(this,t),(s=n.call(this,e)).state={shouldShowChooseOptionWindow:!0,shouldShowConnectingPage:!1,shouldShowLeaveMessagePage:!1},s.renderChooseOptionWindow=function(){var e=s.props,n=(e.contextCls,(0,a.Z)(e,me));return(0,T.jsxs)(g.Z,(0,r.Z)((0,r.Z)({},n),{},{contextCls:"".concat(s.baseCls,"__choose-option"),shouldShowCloseBtn:!0,children:[s.renderCallout(),s.renderOptions()]}))},s.renderCallout=function(){var e=s.props.contextCls,n=(0,m.i0)("chooseOptionWindow.title");return(0,T.jsx)(C.Z,{contextCls:d()("".concat(s.baseCls,"__header-container"),e),renderIcon:s.renderSvg,title:n})},s.renderConnectingPage=function(){var e=s.props,n=(e.contextCls,(0,a.Z)(e,ge));return(0,T.jsx)(Ce,(0,r.Z)((0,r.Z)({},n),{},{contextCls:"".concat(s.baseCls,"__connecting")}))},s.renderLeaveMessagePage=function(){var e=s.props,n=(e.contextCls,(0,a.Z)(e,fe));return(0,T.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{contextCls:"".concat(s.baseCls,"__leave-message")}))},s.renderSvg=function(){var e=s.props.contextCls;return(0,T.jsx)($.Z,{filename:"help.svg",alt:(0,m.i0)("chooseOptionWindow.imgAlt.help"),contextCls:d()("".concat(s.baseCls,"__header-container-svg"),e)})},s.renderOptions=function(){var e=s.props,n=e.contextCls,t=e.isLeaveAgentMessageEnabled,r=s.getOptionTranslations(),a=[{id:r.supportOptionId,meta:s.isLoggedIn?r.supportOptionLoggedInMeta:r.supportOptionNotLoggedInMeta,text:s.isLoggedIn?r.supportOptionLoggedInText:r.supportOptionNotLoggedInText,handleClick:s.handleSupportOptionClick,renderIcon:s.renderSupportSvg}];return t&&a.push({id:r.messageOptionId,text:r.messageOptionText,meta:r.messageOptionMeta,handleClick:s.handleMessageOptionClick,renderIcon:s.renderMessageSvg}),(0,T.jsx)(h.Z,{contextCls:d()("".concat(s.baseCls,"__content-container"),n),data:a,renderListItem:s.renderOptionsListItem})},s.renderOptionsListItem=function(e){return(0,T.jsx)(p.Z,{contextCls:"".concat(s.baseCls,"__").concat(e.id),text:e.text,meta:e.meta,onClick:e.handleClick,renderIcon:e.renderIcon,isInteractive:!0,shouldRenderAfterIcon:!0})},s.renderSupportSvg=function(){return(0,T.jsx)($.Z,{filename:"support.svg",alt:(0,m.i0)("chooseOptionWindwo.imgAlt.support"),contextCls:"".concat(s.baseCls,"__svg-container")})},s.renderMessageSvg=function(){return(0,T.jsx)($.Z,{filename:"message.svg",alt:(0,m.i0)("chooseOptionWindwo.imgAlt.message"),contextCls:"".concat(s.baseCls,"__svg-container")})},s.handleSupportOptionClick=function(){if(s.isLoggedIn)s.setState({shouldShowChooseOptionWindow:!1,shouldShowConnectingPage:!0,shouldShowLeaveMessagePage:!1});else{var e=s.props.loginUrl;e&&(window.location.href=e)}},s.handleMessageOptionClick=function(){s.setState({shouldShowChooseOptionWindow:!1,shouldShowConnectingPage:!1,shouldShowLeaveMessagePage:!0})},s.getOptionTranslations=function(){var e=s.props,n=e.ewt,t=e.longWaitThresholdMinutes,r=(0,m.i0)("chooseOptionWindow.resourceListItem.supportOptionLongEwtMeta"),a=(0,m.i0)("chooseOptionWindow.resourceListItem.supportOptionShortEwtMeta"),o=n>t?r:!!a&&a.replace("{ewt}",n);return{supportOptionLongEwtMeta:r,supportOptionShortEwtMeta:a,supportOptionLoggedInMeta:o,supportOptionNotLoggedInMeta:(0,m.i0)("chooseOptionWindow.resourceListItem.supportOptionNoEwtMeta"),supportOptionNotLoggedInText:(0,m.i0)("chooseOptionWindow.resourceListItem.supportOptionNoEwtText"),supportOptionLoggedInText:(0,m.i0)("chooseOptionWindow.resourceListItem.supportOptionEwtText"),messageOptionMeta:(0,m.i0)("chooseOptionWindow.resourceListItem.messageOptionMeta"),messageOptionText:(0,m.i0)("chooseOptionWindow.resourceListItem.messageOptionText"),supportOptionId:(0,m.i0)("chooseOptionWindow.resourceListItem.supportOptionId"),messageOptionId:(0,m.i0)("chooseOptionWindow.resourceListItem.messageOptionId")}},s.baseCls="web-chat-choose-option-window";var i=e.accountIdentifier;return s.isLoggedIn=!!i,s}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls,n=this.state,t=n.shouldShowChooseOptionWindow,r=n.shouldShowConnectingPage,a=n.shouldShowLeaveMessagePage;return(0,T.jsxs)("div",{className:d()(this.baseCls,e),children:[r&&this.renderConnectingPage(),a&&this.renderLeaveMessagePage(),t&&this.renderChooseOptionWindow()]})}}]),t}(l.PureComponent);ve.defaultProps={longWaitThresholdMinutes:10};var xe=ve},6202:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(1413),a=t(4925),o=t(5671),s=t(3144),i=t(9340),c=t(2882),l=t(2672),u=t(1694),d=t.n(u),h=t(6598),p=t(8491),C=t(6746),m=t(5996),g=t(7851),f=t(184),v=["contextCls","windowTitle","headText","subText"],x=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).renderSvg=function(){var n=e.props,t=n.icon,r=n.renderIcon;if(r)return r();var a=(0,p.i0)("genericMessage.imgAlt.warningAlert"),o=(0,p.i0)("genericMessage.imgAlt.success");return t===m.Z.WARNING?(0,f.jsx)(g.Z,{filename:"warning-alert.svg",alt:a}):(0,f.jsx)(g.Z,{filename:"success.svg",alt:o})},e.baseCls="web-chat-generic-message",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.contextCls,t=e.windowTitle,o=e.headText,s=e.subText,i=(0,a.Z)(e,v);return(0,f.jsx)(C.Z,(0,r.Z)((0,r.Z)({},i),{},{contextCls:d()(this.baseCls,n),title:t,shouldShowCloseBtn:!0,children:(0,f.jsx)(h.Z,{contextCls:d()("".concat(this.baseCls,"__message-content"),n),renderIcon:this.renderSvg,title:o,msg:s})}))}}]),t}(l.PureComponent);x.defaultProps={shouldShowMinimizeBtn:!1};var w=x},5996:function(e,n){n.Z={WARNING:"WarningAlert",SUCCESS:"Success"}},6472:function(e,n,t){t.d(n,{Z:function(){return M}});var r=t(1413),a=t(4925),o=t(5671),s=t(3144),i=t(9340),c=t(2882),l=t(2672),u=t(1694),d=t.n(u),h=t(6598),p=t(537),C=t(813),m=t(8491),g=t(6746),f=t(3356),v=t(7851),x=t(184),w=["contextCls","hoop","isLeaveAgentMessageEnabled"],b=["contextCls"],Z=p.Z.SECONDARY,S=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return(e=n.call.apply(n,[this].concat(i))).state={shouldShowHoopWindow:!0,shouldShowLeaveMessageWindow:!1},e.renderClockIcon=function(){return(0,x.jsx)(v.Z,{filename:"clock.svg",alt:(0,m.i0)("hoop.imgAlt.clock")})},e.renderHoopWindow=function(){var n=e.props,t=(n.contextCls,n.hoop),o=n.isLeaveAgentMessageEnabled,s=(0,a.Z)(n,w),i="".concat((0,m.i0)("hoop.hoopMessage")).replace("{hoop}",t),c=o?(0,m.i0)("hoop.hoopMessage.leaveAgentMsgEnabled"):(0,m.i0)("hoop.hoopMessage.leaveAgentMsgNotEnabled"),l=o;return(0,x.jsx)(g.Z,(0,r.Z)((0,r.Z)({},s),{},{contextCls:"".concat(e.baseCls,"__hoop"),shouldShowCloseBtn:!0,onCloseBtnClick:e.handleCloseBtnClick,shouldCloseWindowContainer:!e.state.shouldShowHoopWindow,children:(0,x.jsxs)("div",{className:"".concat(e.baseCls,"__hoop-content"),children:[(0,x.jsx)(h.Z,{renderIcon:e.renderClockIcon,title:i,msg:c}),l&&e.renderLeaveMessageBtn()]})}))},e.renderLeaveMessageBtn=function(){return(0,x.jsx)(C.Z,{contextCls:d()("".concat(e.baseCls,"__leave-message-btn")),text:(0,m.i0)("hoop.leaveMsgBtn.text"),variant:Z,onClick:e.handleLeaveMessageBtnClick,"aria-label":(0,m.i0)("hoop.leaveMsgBtn.text")})},e.renderLeaveMessageWindow=function(){var n=e.props,t=(n.contextCls,(0,a.Z)(n,b));return(0,x.jsx)(f.Z,(0,r.Z)((0,r.Z)({},t),{},{contextCls:"".concat(e.baseCls,"__leave-message"),onMessageSent:e.handleMessageSent}))},e.handleLeaveMessageBtnClick=function(){e.setState({shouldShowHoopWindow:!1,shouldShowLeaveMessageWindow:!0})},e.baseCls="web-chat-hoop",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.state,n=e.shouldShowHoopWindow,t=e.shouldShowLeaveMessageWindow,r=this.props.contextCls;return(0,x.jsxs)("div",{className:d()(this.baseCls,r),children:[n&&this.renderHoopWindow(),t&&this.renderLeaveMessageWindow()]})}}]),t}(l.PureComponent),M=S},6389:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(4165),a=t(5861),o=t(4942),s=t(5671),i=t(3144),c=t(9340),l=t(2882),u=t(2672),d=t(1694),h=t.n(d),p=t(8491),C=t(537),m=t(813),g=t(7996),f=t(4113),v=t(184),x=C.Z.SECONDARY,w=function(e){(0,c.Z)(t,e);var n=(0,l.Z)(t);function t(){var e;(0,s.Z)(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(e=n.call.apply(n,[this].concat(c))).state={unreadMessageCount:0},e.renderIconButton=function(){var n=(0,p.i0)("iconButtonChat.buttonText"),t=(0,p.i0)("iconButtonChat.buttonAriaLabel");return(0,v.jsx)(m.Z,{contextCls:h()("".concat(e.baseCls,"__icon-btn-chat")),renderIcon:e.renderSvgIcon,onClick:e.handleClick,variant:x,text:n,"aria-label":t})},e.renderCounter=function(){var n=e.getModCls();return(0,v.jsx)("div",{className:h()("".concat(e.baseCls,"__count"),n),"data-count":e.state.unreadMessageCount})},e.renderSvgIcon=function(){return(0,e.props.renderSvg)()},e.handleClick=function(){(0,e.props.onClick)()},e.handleMessageAdd=function(){var n=e.state.unreadMessageCount;e.setState({unreadMessageCount:n+1})},e.getModCls=function(){var n=e.props.shouldShowUnreadCount;return(0,o.Z)({},"".concat(e.baseCls,"__count-number"),n)},e.attachConversationEvent=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.cc)();case 2:n.sent.on(g.ri.messageAdded,e.handleMessageAdd);case 4:case"end":return n.stop()}}),n)}))),e.detachConversationEvent=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.cc)();case 2:n.sent.off(g.ri.messageAdded,e.handleMessageAdd);case 4:case"end":return n.stop()}}),n)}))),e.baseCls="icon-button-chat",e}return(0,i.Z)(t,[{key:"render",value:function(){var e=this.props.contextCls;return(0,v.jsx)("div",{className:h()("".concat(this.baseCls),e),children:(0,v.jsxs)("div",{className:"".concat(this.baseCls,"__container"),children:[this.renderIconButton(),this.renderCounter()]})})}},{key:"componentDidMount",value:function(){this.attachConversationEvent()}},{key:"componentWillUnmount",value:function(){this.detachConversationEvent()}}]),t}(u.PureComponent);w.defaultProps={onClick:function(){return Promise.resolve()},renderSvg:function(){}};var b=w},7851:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(1413),a=t(4925),o=t(5671),s=t(3144),i=t(9340),c=t(2882),l=t(2672),u=t(1694),d=t.n(u),h=t(9551),p=t(2496),C=t(9468),m=t(184),g=["filename","alt","contextCls"],f=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={isSrcError:!1},e.handleImageError=function(){e.setState({isSrcError:!0})},e.getRelativeImageUrl=function(e,n){var t=e.toLowerCase(),r=e.toUpperCase();return"/resources/".concat(t,"/").concat(C.n6[r],"/media/images/WebChat/").concat(n)},e.getFullImageUrl=function(){var n=e.props.filename,t=h.Z.Brand;return e.determinedImagePrefixUrl()+e.getRelativeImageUrl(t,n)},e.getFallbackImageUrl=function(){var n=e.props.filename;return e.determinedImagePrefixUrl()+e.getRelativeImageUrl("go2bank",n)},e.determinedImagePrefixUrl=function(){return(0,p.vM)()},e.baseCls="webchat-img",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props,n=(e.filename,e.alt),t=e.contextCls,o=(0,a.Z)(e,g),s=this.state.isSrcError;return(0,m.jsx)("img",(0,r.Z)((0,r.Z)({},o),{},{src:s?this.getFallbackImageUrl():this.getFullImageUrl(),alt:null!==n&&void 0!==n?n:"",className:d()(this.baseCls,t),onError:this.handleImageError}))}}]),t}(l.Component)},3356:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(4165),a=t(5861),o=t(1413),s=t(4925),i=t(5671),c=t(3144),l=t(9340),u=t(2882),d=t(2672),h=t(1694),p=t.n(h),C=t(8491),m=t(537),g=t(813),f=t(6598),v=t(8427),x=t(9371),w=t(6746),b=t(6202),Z=t(3626),S=t(1301),M=t(3170),E=t(5996),y=t(8974),k="Website",I=t(7851),_=t(184),B=["contextCls"],T=(0,v.Z)(x.Z),A=m.Z.PRIMARY,W=m.Z.SECONDARY,L=function(e){(0,l.Z)(t,e);var n=(0,u.Z)(t);function t(){var e;(0,i.Z)(this,t);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return(e=n.call.apply(n,[this].concat(l))).state={shouldShowLeaveMessageWindow:!0,shouldShowMessageSentWindow:!1,value:"",isSendMsgBtnEnabled:!1,shouldShowErrorMsg:!1,userEmail:"",shouldShowConfirmModal:!1,shouldShowCounter:!1,count:0,shouldShowEmailError:!1,shouldShowEmailInput:!1},e.renderAirplaneIcon=function(){return(0,_.jsx)(I.Z,{filename:"paper-airplane.svg",alt:(0,C.i0)("leaveMessage.imgAlt.paperAirplan")})},e.renderLeaveMessageWindow=function(){var n=e.props,t=n.contextCls,r=n.leaveAgentMessage,a=e.state,o=a.value,s=a.shouldShowErrorMsg,i=a.isSendMsgBtnEnabled,c=a.shouldShowEmailInput,l=e.state,u=l.userEmail,d=l.shouldShowEmailError;return(0,_.jsx)(w.Z,{contextCls:"".concat(e.baseCls,"__leave-message"),shouldShowCloseBtn:!0,onCloseBtnClick:e.handleLeaveMsgCloseBtnClick,children:(0,_.jsxs)("div",{className:p()("".concat(e.baseCls,"__leave-message-content"),t),children:[(0,_.jsx)(f.Z,{renderIcon:e.renderAirplaneIcon,title:(0,C.i0)("leaveMessage.calloutTitle"),msg:r}),c&&(0,_.jsx)(T,{contextCls:"".concat(e.baseCls,"__email-input"),placeholder:(0,C.i0)("leaveMessage.emailInputText"),value:u,maxLength:50,onChange:e.handleUserEmailChange,"aria-label":(0,C.i0)("leaveMessage.emailInputText"),labelProps:{labelText:(0,C.i0)("leaveMessage.emailInputText")},errorProps:{errorText:d?(0,C.i0)("leaveMessage.emailInputText.formatErrorMsg"):""},hasError:d}),(0,_.jsx)(Z.Z,{contextCls:"".concat(e.baseCls,"__message-input"),placeholder:(0,C.i0)("leaveMessage.messageInputText"),"aria-label":(0,C.i0)("leaveMessage.messageInputAriaLabel"),labelProps:{labelText:(0,C.i0)("leaveMessage.messageInputText")},value:o,onChange:e.handleMessageChange,rows:3,renderAfterControl:e.renderAfter}),(0,_.jsx)("p",{className:"".concat(e.baseCls,"__msg-input-hint"),children:(0,C.i0)("leaveMessage.messageInputHint")}),s&&(0,_.jsx)("p",{className:"".concat(e.baseCls,"__error-msg"),children:(0,C.i0)("leaveMessage.errorMsg")}),(0,_.jsx)(g.Z,{contextCls:"".concat(e.baseCls,"__send-msg-btn"),text:(0,C.i0)("leaveMessage.sendMessageBtnText"),variant:A,onClick:e.handleSendMsgBtnClick,"aria-label":(0,C.i0)("leaveMessage.sendMessageBtnText"),isDisabled:!i})]})})},e.renderAfter=function(){var n=e.state.shouldShowCounter;return(0,_.jsx)("div",{className:"".concat(e.baseCls,"__after-control-container"),children:n&&e.renderCounter()})},e.renderCounter=function(){var n=e.props.msgMaxLength,t=e.state.count;return(0,_.jsx)("div",{className:"".concat(e.baseCls,"__counter-container"),children:(0,_.jsxs)("span",{children:[t,"/",n]})})},e.renderMessageSentWindow=function(){var n=e.props,t=(n.contextCls,(0,s.Z)(n,B)),r=(0,C.i0)("leaveMessage.messageSend.title"),a=(0,C.i0)("leaveMessage.messageSend.subText");return(0,_.jsx)(b.Z,(0,o.Z)((0,o.Z)({},t),{},{contextCls:"".concat(e.baseCls,"__message-sent"),icon:E.Z.SUCCESS,headText:r,subText:a}))},e.renderConfirmModal=function(){var n=e.props.contextCls,t=[{variant:A,text:(0,C.i0)("leaveMessage.modal.primaryBtn.text"),ariaLabel:(0,C.i0)("leaveMessage.modal.primaryBtn.text"),onClick:e.handlePrimaryBtnClick},{variant:W,text:(0,C.i0)("leaveMessage.modal.secondaryBtn.text"),ariaLabel:(0,C.i0)("leaveMessage.modal.secondaryBtn.text"),onClick:e.handleSecondaryBtnClick}];return(0,_.jsx)(S.Z,{contextCls:p()("".concat(e.baseCls,"__modal-wrapper"),n),modalActions:t,renderTo:e.modalWapperRenderToElement,appElement:e.webChatLeaveMessageElement,iconName:y.H.EurekaCircleX,iconType:y.G.INFO,title:(0,C.i0)("leaveMessage.modal.title"),message:(0,C.i0)("leaveMessage.modal.message")})},e.handlePrimaryBtnClick=function(){var n=e.props.onChatWidgetClose;e.setState({shouldShowLeaveMessageWindow:!1,shouldShowConfirmModal:!1}),n&&n()},e.handleSecondaryBtnClick=function(){e.setState({shouldShowConfirmModal:!1})},e.handleLeaveMsgCloseBtnClick=function(){e.setState({shouldShowConfirmModal:!0})},e.handleSendMsgBtnClick=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({isSendMsgBtnEnabled:!1,shouldShowErrorMsg:!1}),n.next=3,e.submitMessage();case 3:case"end":return n.stop()}}),n)}))),e.handleMessageChange=function(n){var t,r=n.target.value,a=(null===(t=r)||void 0===t?void 0:t.length)||0,o=e.props,s=o.accountIdentifier,i=o.msgMinLength,c=o.msgMaxLength,l=e.state.userEmail,u=s||l;a>c&&(r=r.slice(0,c)),e.setState({value:r,isSendMsgBtnEnabled:u&&r.length>=i,shouldShowCounter:r.length>0,count:r.length})},e.handleUserEmailChange=function(n){var t=e.props.msgMinLength,r=n.target.value.trim(),a=r.length>0,o=e.state.value;e.setState({userEmail:r,isSendMsgBtnEnabled:a&&o&&o.length>=t,shouldShowEmailError:!1})},e.setShowEmailInput=function(){var n=e.props.accountIdentifier;e.setState({shouldShowEmailInput:!n})},e.checkEmail=function(n){return!!/^[a-zA-Z0-9_+-]+(\.[a-zA-Z0-9_+-]+)*@[a-zA-Z0-9-]{2,}(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,4})$/.test(n)||(e.setState({isSendMsgBtnEnabled:!1,shouldShowEmailError:!0}),!1)},e.submitMessage=(0,a.Z)((0,r.Z)().mark((function n(){var t,a,o,s,i,c,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t={isSendMsgBtnEnabled:!1,shouldShowErrorMsg:!1},a=e.state,o=a.userEmail,s=a.value,i=a.shouldShowEmailInput,c=e.props.accountIdentifier,!(i&&o.length>0)){n.next=6;break}if(e.checkEmail(o)){n.next=6;break}return n.abrupt("return");case 6:return n.prev=6,l={account:c,email:o,deviceType:k,message:s.trim()},n.next=10,(0,M.m$)(l);case 10:n.sent.isSuccess?(t.shouldShowLeaveMessageWindow=!1,t.shouldShowMessageSentWindow=!0):(t.shouldShowErrorMsg=!0,t.isSendMsgBtnEnabled=!0),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(6),t.shouldShowErrorMsg=!0,t.isSendMsgBtnEnabled=!0;case 18:return n.prev=18,e.setState(t),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[6,14,18,21]])}))),e.modalWapperRenderToElement=function(){return e.webChatLeaveMessageElement},e.baseCls="web-chat-leave-message",e}return(0,c.Z)(t,[{key:"render",value:function(){var e=this.state,n=e.shouldShowLeaveMessageWindow,t=e.shouldShowMessageSentWindow,r=e.shouldShowConfirmModal,a=this.props.contextCls;return(0,_.jsxs)("div",{className:p()(this.baseCls,a),children:[n&&this.renderLeaveMessageWindow(),t&&this.renderMessageSentWindow(),r&&this.renderConfirmModal()]})}},{key:"componentDidMount",value:function(){this.webChatLeaveMessageElement=document.querySelector(".eureka-tile"),this.setShowEmailInput()}}]),t}(d.PureComponent);L.defaultProps={onChatWidgetClose:function(){return Promise.resolve()},msgMaxLength:280,msgMinLength:30,lineHeight:27};var j=L},2889:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(1413),a=t(4925),o=t(5671),s=t(3144),i=t(9340),c=t(2882),l=t(2672),u=t(1694),d=t.n(u),h=t(6310),p=t(6746),C=t(184),m=["contextCls","title","msg","shouldShowCloseBtn"],g=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).baseCls="web-chat-loading",e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.contextCls,t=e.title,o=e.msg,s=e.shouldShowCloseBtn,i=(0,a.Z)(e,m);return(0,C.jsx)(p.Z,(0,r.Z)((0,r.Z)({},i),{},{contextCls:d()(this.baseCls,n),shouldShowCloseBtn:s,children:(0,C.jsx)(h.Z,{contextCls:"".concat(this.baseCls,"__loading-state"),title:t,msg:o})}))}}]),t}(l.PureComponent),f=g},3626:function(e,n,t){t.d(n,{Z:function(){return _}});var r=t(1413),a=t(5671),o=t(3144),s=t(9340),i=t(2882),c=t(2672),l=t.n(c),u=t(8427),d=t(4925),h=t(1694),p=t.n(h),C=t(6782),m=t(2810),g="function"===typeof Map?new Map:function(){var e=[],n=[];return{has:function(n){return e.indexOf(n)>-1},get:function(t){return n[e.indexOf(t)]},set:function(t,r){-1===e.indexOf(t)&&(e.push(t),n.push(r))},delete:function(t){var r=e.indexOf(t);r>-1&&(e.splice(r,1),n.splice(r,1))}}}(),f=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(B){f=function(e){var n=document.createEvent("Event");return n.initEvent(e,!0,!1),n}}function v(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!g.has(e)){var n=null,t=null,r=null,a=function(){e.clientWidth!==t&&c()},o=function(n){window.removeEventListener("resize",a,!1),e.removeEventListener("input",c,!1),e.removeEventListener("keyup",c,!1),e.removeEventListener("autosize:destroy",o,!1),e.removeEventListener("autosize:update",c,!1),Object.keys(n).forEach((function(t){e.style[t]=n[t]})),g.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",o,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",c,!1),window.addEventListener("resize",a,!1),e.addEventListener("input",c,!1),e.addEventListener("autosize:update",c,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",g.set(e,{destroy:o,update:c}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),c()}()}function s(n){var t=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=t,e.style.overflowY=n}function i(){if(0!==e.scrollHeight){var r=function(e){for(var n=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&n.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return n}(e),a=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height="".concat(e.scrollHeight+n,"px"),t=e.clientWidth,r.forEach((function(e){e.node.scrollTop=e.scrollTop})),a&&(document.documentElement.scrollTop=a)}}function c(){i();var n=Math.round(parseFloat(e.style.height)),t=window.getComputedStyle(e,null),a="content-box"===t.boxSizing?Math.round(parseFloat(t.height)):e.offsetHeight;if(a<n?"hidden"===t.overflowY&&(s("scroll"),i(),a="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==t.overflowY&&(s("hidden"),i(),a="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==a){r=a;var o=f("autosize:resized");try{e.dispatchEvent(o)}catch(c){}}}}function x(e){var n=g.get(e);n&&n.destroy()}function w(e){var n=g.get(e);n&&n.update()}var b=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?((b=function(e){return e}).destroy=function(e){return e},b.update=function(e){return e}):((b=function(e,n){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return v(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],x),e},b.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],w),e});var Z=b,S=t(184),M=["contextCls","onResize","maxRows","onChange","onKeyDown","style","innerRef","children","lineHeight"],E="autosize:resized",y=function(e){(0,s.Z)(t,e);var n=(0,i.Z)(t);function t(){var e;(0,a.Z)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=n.call.apply(n,[this].concat(o))).state={lineHeight:void 0},e.handleChange=function(n){var t=e.props.onChange;t&&t(n)},e.handleKeyDown=function(n){var t=e.props.onKeyDown;t&&t(n)},e.handleKeyPress=function(n){var t=e.props.onKeyPress;t&&t(n)},e.handleResize=function(n){var t=e.props.onResize;t&&t(n)},e.updateLineHeight=function(){var n=e.props.lineHeight;e.textarea&&e.setState({lineHeight:n})},e.id="textarea-autosize-".concat((0,m.Z)()),e.baseCls="web-chat-textarea-autosize",e}return(0,o.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.contextCls,t=(e.onResize,e.maxRows),a=(e.onChange,e.onKeyDown,e.style),o=(e.innerRef,e.children,e.lineHeight,(0,d.Z)(e,M)),s=this.state.lineHeight,i=t&&s?s*t:void 0;return(0,S.jsx)(C.Z,(0,r.Z)((0,r.Z)({},o),{},{contextCls:p()(this.baseCls,n),onChange:this.handleChange,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,style:i?(0,r.Z)((0,r.Z)({},a),{},{maxHeight:i}):a,id:this.id}))}},{key:"componentDidUpdate",value:function(){this.textarea&&Z.update(this.textarea)}},{key:"componentDidMount",value:function(){var e=this,n=this.props.maxRows;this.textarea=document.getElementById(this.id),"number"===typeof n?(this.updateLineHeight(),setTimeout((function(){return e.textarea&&Z(e.textarea)}))):this.textarea&&Z(this.textarea),this.textarea&&this.textarea.addEventListener(E,this.handleResize)}},{key:"componentWillUnmount",value:function(){this.textarea&&(this.textarea.removeEventListener(E,this.handleResize),Z.destroy(this.textarea))}}]),t}(c.PureComponent);y.defaultProps={rows:1};var k=l().forwardRef((function(e,n){return(0,S.jsx)(y,(0,r.Z)((0,r.Z)({},e),{},{innerRef:n}))})),I=function(e){(0,s.Z)(t,e);var n=(0,i.Z)(t);function t(){var e;(0,a.Z)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=n.call.apply(n,[this].concat(o))).baseCls="web-chat-message-input",e}return(0,o.Z)(t,[{key:"render",value:function(){return(0,S.jsx)(k,(0,r.Z)({contextCls:this.baseCls},this.props))}}]),t}(c.PureComponent);I.defaultProps={maxLength:280,lineHeight:27,maxRows:3};var _=(0,u.Z)(I)},1301:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(4942),a=t(5671),o=t(3144),s=t(9340),i=t(2882),c=t(2672),l=t(1694),u=t.n(l),d=t(6598),h=t(8738),p=t(537),C=t(813),m=t(6693),g=t(6210),f=t(8974),v=t(184),x=p.Z.PRIMARY,w=p.Z.SECONDARY,b=function(e){(0,s.Z)(t,e);var n=(0,i.Z)(t);function t(){var e;(0,a.Z)(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(e=n.call.apply(n,[this].concat(s))).renderModalActions=function(){var n=e.getActionByType(x),t=e.getActionByType(w);return(0,v.jsxs)(v.Fragment,{children:[t&&e.renderAction(t),n&&e.renderAction(n)]})},e.renderAction=function(n){var t=n.onClick,r=n.text,a=n.variant,o=n.ariaLabel,s=e.getActionsModCls();return(0,v.jsx)(C.Z,{contextCls:u()("".concat(e.baseCls,"__btn"),s),text:r,variant:a,onClick:t,"aria-label":o})},e.renderIcon=function(){var n,t,a=e.props,o=a.iconName,s=a.iconType,i="".concat(e.baseCls,"__icon");switch(o){case f.H.EurekaCircleX:t=m.Z;break;case f.H.EurekaTriangleAlert:default:t=g.Z}var c=(n={},(0,r.Z)(n,"".concat(e.baseCls,"__icon--primary"),s===f.G.INFO),(0,r.Z)(n,"".concat(e.baseCls,"__icon--error"),s===f.G.ERROR),n);return(0,v.jsx)("div",{className:u()("".concat(e.baseCls,"__icon-container"),c),children:(0,v.jsx)(t,{contextCls:i})})},e.getActionsModCls=function(){var n=e.props.modalActions;return(0,r.Z)({},"".concat(e.baseCls,"__btn--single"),1===n.length)},e.getActionByType=function(n){return e.props.modalActions.find((function(e){return e.variant===n}))},e.baseCls="web-chat-modal-wrapper",e.baseOverlayCls="web-chat-modal-wrapper__overlay",e}return(0,o.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.contextCls,t=e.appElement,r=e.renderTo,a=e.title,o=e.message;return(0,v.jsx)(h.Z,{dialogContextCls:u()(this.baseCls,n),overlayContextCls:u()(this.baseOverlayCls,n),renderModalActions:this.renderModalActions,hasCloseButton:!1,isOpen:!0,renderTo:r,appElement:t,children:(0,v.jsx)(d.Z,{contextCls:"".concat(this.baseCls,"__message-content"),renderIcon:this.renderIcon,title:a,msg:o})})}},{key:"componentDidMount",value:function(){this.container=document.querySelector(".ReactModalPortal"),this.container&&this.container.classList.add("react-modal-portal")}}]),t}(c.PureComponent);b.defaultProps={modalActions:[],appElement:document.getElementById("root"),renderTo:function(){return document.body}};var Z=b},8974:function(e,n,t){t.d(n,{G:function(){return a},H:function(){return r}});var r={EurekaCircleX:"EurekaCircleX",EurekaTriangleAlert:"EurekaTriangleAlert"},a={ERROR:"ERROR",INFO:"INFO"}},6746:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(5671),a=t(3144),o=t(9340),s=t(2882),i=t(2672),c=t(1694),l=t.n(c),u=t(4596),d=t(4737),h=t(2540),p=t(7968),C=t(3254),m=t(8491),g=t(6389),f=t(7851),v=t(184),x=function(e){(0,o.Z)(t,e);var n=(0,s.Z)(t);function t(){var e;(0,r.Z)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=n.call.apply(n,[this].concat(o))).state={shouldShowMinimizedIconButton:!1,shouldCloseWindow:!1},e.renderTile=function(){var n=e.props,t=n.contextCls,r=n.children;return(0,v.jsx)("div",{className:l()(e.baseCls,t),children:(0,v.jsx)(u.Z,{renderHeading:e.renderHeading,contextCls:l()(e.baseTileCls,t),children:r})})},e.renderHeading=function(){var n=e.props,t=n.title,r=n.shouldShowMinimizeBtn,a=n.shouldShowCloseBtn;return(0,v.jsxs)("div",{className:"".concat(e.baseTileCls,"-header"),children:[(0,v.jsx)(p.Z,{contextCls:"".concat(e.baseTileCls,"-header-title"),children:t}),r&&e.renderMinimizeBtn(),a&&e.renderCloseBtn()]})},e.renderCloseBtn=function(){var n=(0,m.i0)("windowContainer.buttons.closeButtonAriaLabel");return(0,v.jsx)("div",{className:l()(e.baseTitleBtnContainerCls,"".concat(e.baseTitleBtnContainerCls,"--close-btn-container")),children:(0,v.jsx)(C.Z,{contextCls:"".concat(e.baseCls,"__close-btn"),renderIcon:e.renderCloseBtnIcon,onClick:e.handleCloseBtnClick,"aria-label":n})})},e.renderMinimizeBtn=function(){var n=(0,m.i0)("windowContainer.buttons.minimizeButtonAriaLabel");return(0,v.jsx)("div",{className:l()(e.baseTitleBtnContainerCls,"".concat(e.baseTitleBtnContainerCls,"--minimize-btn-container")),children:(0,v.jsx)(C.Z,{contextCls:"".concat(e.baseCls,"__minimize-btn"),renderIcon:e.renderMinimizeBtnIcon,onClick:e.handleMinimizeBtnClick,"aria-label":n})})},e.renderMinimizeBtnIcon=function(){return(0,v.jsx)(d.Z,{})},e.renderCloseBtnIcon=function(){return(0,v.jsx)(h.Z,{})},e.renderSvgChat=function(){return(0,v.jsx)(f.Z,{filename:"chat.svg",alt:(0,m.i0)("windowContainer.imgAlt.chat")})},e.renderIconButtonChat=function(){return(0,v.jsx)(g.Z,{contextCls:"".concat(e.baseCls,"__icon-button"),renderSvg:e.renderSvgChat,onClick:e.handleMinimizedIconBtnClick})},e.handleCloseBtnClick=function(){var n=e.props,t=n.onCloseBtnClick,r=n.onChatWidgetClose;t?t():(e.setState({shouldCloseWindow:!0}),r&&r())},e.handleMinimizeBtnClick=function(){var n=e.props.onMinimizeBtnClick;n?n():e.setState({shouldShowMinimizedIconButton:!0})},e.handleMinimizedIconBtnClick=function(){e.setState({shouldShowMinimizedIconButton:!1})},e.baseCls="web-chat-window-container",e.baseTileCls="".concat(e.baseCls,"__tile"),e.baseTitleBtnContainerCls="".concat(e.baseCls,"__title-btn-container"),e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.state,n=e.shouldShowMinimizedIconButton,t=e.shouldCloseWindow,r=this.props.contextCls;return(0,v.jsxs)("div",{className:l()(this.baseCls,r),children:[n&&!t&&this.renderIconButtonChat(),!n&&!t&&this.renderTile()]})}}]),t}(i.PureComponent);x.defaultProps={shouldShowMinimizeBtn:!1,shouldShowCloseBtn:!1,onChatWidgetClose:function(){return Promise.resolve()}};var w=x},9468:function(e,n,t){t.d(n,{$R:function(){return a},Dt:function(){return s},G0:function(){return o},Gv:function(){return u},cg:function(){return c},iw:function(){return i},n6:function(){return l},zC:function(){return r}});var r={GET_CONFIG:"/api/communication/config",LEAVE_MESSAGE:"/api/communication/leaveagentmessage",REQUEST_USER_TOKEN:"/api/communication/user/token/request?component=CHAT",START_CONVERSATION:"/api/communication/conversation/start",END_CONVERSATION:"/api/communication/conversation/end"},a={GET_CONFIG:"/communication/config",LEAVE_MESSAGE:"/communication/leaveagentmessage",REQUEST_USER_TOKEN:"/communication/user/token/request",START_CONVERSATION:"/{applicationId}/communication/conversation/start",END_CONVERSATION:"/communication/conversation/end"},o={LEGACY:{QA:"https://secure.greendot.com/api",PIE:"https://secure.greendot.com/api",PROD:"https://secure.greendot.com/api"},BAAS:{QA:"https://qa-secure-gdrewardsdev.nextestate.com/BaaSGateway/v1",PIE:"https://pie-secure-gdrewardsdev.nextestate.com/BaaSGateway/v1",PROD:"https://secure.go2bank.com/api/BaaSGateway/v1"}},s={DEV:"https://dev-cdn.go2bankonline.com",QA:"https://qa-cdn.go2bankonline.com",PIE:"https://pie-cdn.go2bankonline.com",PROD:"https://prod-cdn.go2bankonline.com"},i={LEGACY:"LEGACY",BAAS:"BAAS"},c={GO2BANK:"go2bank",GOBANK:"gobank",WALMART:"walmart",GREENDOT:"greendot",INTUIT:"intuit",RUSHCARD:"rushcard"},l={GO2BANK:"gbr",GREENDOT:"greendot",WALMART:"walmart",INTUIT:"intuit",GOBANK:"gobank",RUSHCARD:"rushcard"},u={DEV:"DEV",QA:"QA",PIE:"PIE",PROD:"PROD"}},3170:function(e,n,t){t.d(n,{$D:function(){return i},YQ:function(){return u},jw:function(){return d},kA:function(){return l},m$:function(){return c}});var r=t(4165),a=t(5861),o=t(9306),s=t(2496),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.P8)(),t=n.GET_CONFIG,e.next=3,(0,o.U2)(t);case 3:return a=e.sent,i={hoop:a.hoop,isAgentOnline:a.isAgentOnline,ewt:a.ewt,isLeaveAgentMessageEnabled:a.isLeaveAgentMessageEnabled,leaveAgentMessage:a.leaveAgentMessage,userInactiveInterval:a.userInactiveInterval},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.P8)(),a=t.LEAVE_MESSAGE,e.next=3,(0,o.v_)(a,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.P8)(),t=n.REQUEST_USER_TOKEN,e.next=3,(0,o.v_)(t);case 3:return a=e.sent,i={token:a.token,email:a.email},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.P8)(),t=n.START_CONVERSATION,e.next=3,(0,o.v_)(t);case 3:return a=e.sent,i={conversationSid:a.conversationSid},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,i,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,s.P8)(),i=a.END_CONVERSATION,e.next=3,(0,o.v_)(i,{conversationSid:n,taskSid:t});case 3:return c=e.sent,l={conversationSid:c.conversationSid},e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},4113:function(e,n,t){t.d(n,{lu:function(){return _},jw:function(){return B},s3:function(){return y},cc:function(){return I},Bx:function(){return Z},bG:function(){return T}});var r,a,o,s,i,c=t(4165),l=t(5861),u=t(3170),d=t(7996),h="initialized",p="failed",C="denied",m="error",g=function(){return r},f=function(e){return new Promise((function(n,t){(r=new d.KU(e)).on(d.KU.stateChanged,(function(e){e===h&&n(r),e===p&&t(e)}))}))},v=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("twilio client must be initialized.");case 2:return e.next=4,r.getConversationBySid(n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateToken(n);case 2:r=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prepareMessage().setBody(n.body).setAttributes({index:n.index}).build().send();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.prepareMessage().setAttributes({index:n.index}).addMedia(n.body).build().send();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Z=function(){return o},S=function(e){o=e},M=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n,t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.kA)();case 2:return n=e.sent,t=n.token,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n,t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=null===(n=s)||void 0===n?void 0:n.connectionState,e.next=e.t0===C?3:e.t0===m?9:15;break;case 3:return e.next=5,M();case 5:return t=e.sent,e.next=8,x(t);case 8:case 14:case 15:return e.abrupt("break",16);case 9:return e.next=11,M();case 11:return r=e.sent,e.next=14,f(r);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=g()){e.next=8;break}return e.next=4,M();case 4:return n=e.sent,e.next=7,f(n);case 7:s=e.sent;case 8:return e.next=10,E();case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n,t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.YQ)();case 2:return n=e.sent,t=n.conversationSid,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n,t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a){e.next=15;break}return e.next=4,y();case 4:return e.next=6,k();case 6:return n=e.sent,e.next=9,v(n);case 9:return i=e.sent,e.next=12,i.getAttributes();case 12:t=e.sent,r=t.Identity,S(r);case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=g())){e.next=4;break}return e.next=4,s.shutdown();case 4:r=void 0,a=void 0,S(void 0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n,t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return i=e.sent,e.next=5,i.getAttributes();case 5:if(n=e.sent,!(t=n.taskSid)){e.next=10;break}return e.next=10,(0,u.jw)(i.sid,t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(null===n||void 0===n||null===(t=n.body)||void 0===t||!t.media){e.next=4;break}return e.abrupt("return",b(n));case 4:return e.abrupt("return",w(n));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},8810:function(e,n,t){t.d(n,{p:function(){return h}});var r=t(4165),a=t(5861),o=t(1413),s=t(7131),i=t(4936),c=t(2496),l=t(9468),u=function(e){var n=(0,o.Z)({},e),t=document.getElementsByTagName("body")[0],r=getComputedStyle(t).fontSize;if(r&&r.includes("px")){var a=+r.slice(0,r.length-2);Object.keys(e).filter((function(e){return e.includes("font.size")})).forEach((function(t){var r=e[t];r&&(n[t]=(10/a*r).toFixed(0))}))}return n},d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,o,s,d,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.vM)(),a=n.toUpperCase(),o=n.toLowerCase(),s="/resources/".concat(o,"/").concat(l.n6[a],"/branding/web.json"),d=t+s,e.next=7,(0,i.U2)(d,{credentials:"same-origin"});case 7:return h=e.sent,e.abrupt("return",u(h));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n);case 2:t=e.sent,a=(0,s.o)(t),(o=document.createElement("style")).appendChild(document.createTextNode(a)),document.head.appendChild(o);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},9551:function(e,n,t){var r=t(9468),a={Environment:r.Gv.PROD,Brand:r.cg.GO2BANK};n.Z=a},9306:function(e,n,t){t.d(n,{cG:function(){return L},U2:function(){return A},hP:function(){return E},fu:function(){return k},dU:function(){return B},v_:function(){return W},M8:function(){return y},u0:function(){return I},Nb:function(){return T},S9:function(){return _}});var r,a,o,s,i=t(4165),c=t(5861),l=t(4936),u=t(1413),d=t(4942),h=t(4925),p=t(2810),C=t(2496),m=t(9468),g="Request-ID",f="Application-ID",v="RequestId",x="ApplicationId",w="Authorization",b=["headers"],Z=["headers"],S=function(e,n){var t,r=e.headers,a=(0,h.Z)(e,b),o=(t={},(0,d.Z)(t,n?v:g,(0,p.Z)()),(0,d.Z)(t,n?x:f,k()),t);return(0,u.Z)({headers:(0,u.Z)((0,u.Z)({},o),r)},a)},M=function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t={},r=e||{},a=r.headers,o=void 0===a?{}:a,s=(0,h.Z)(r,Z),i=E();return i&&(t[w]="Bearer ".concat(i)),S((0,u.Z)((0,u.Z)({},s),{},{headers:(0,u.Z)((0,u.Z)({},t),o)}),n)}(e,(0,C.Xf)()===m.iw.LEGACY)},E=function(){return r},y=function(e){r=e},k=function(){return a},I=function(e){a=e},_=function(e){o=e},B=function(){return s},T=function(e){s=e},A=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n,t){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=M(t),e.next=3,(0,l.U2)((0,C.BC)("".concat(o).concat(n)),r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(n,t,r){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=M(r)).body=t,e.next=4,(0,l.v_)((0,C.BC)("".concat(o).concat(n)),a);case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),L=function(){r="",a="",o="",s=""}},2496:function(e,n,t){t.d(n,{BC:function(){return C},P8:function(){return h},VY:function(){return u},Xf:function(){return d},vM:function(){return p}});var r,a,o=t(9306),s=t(9551),i=t(9468),c="{programCode}",l="{applicationId}",u=function(e){r=e,function(){var e;switch(r){case i.iw.LEGACY:e=i.$R;break;case i.iw.BAAS:default:e=i.zC}a=e}()},d=function(){return r},h=function(){return a},p=function(){switch(s.Z.Environment){case i.Gv.PROD:return i.Dt.PROD;case i.Gv.PIE:return i.Dt.PIE;case i.Gv.QA:return i.Dt.QA;case i.Gv.DEV:return i.Dt.DEV;default:return i.Dt.PROD}},C=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s.Z.Brand&&(e=s.Z.Brand.toUpperCase());var t=n.replace(c,i.n6[e]).replace(l,(0,o.fu)());return t}},2336:function(){}}]);
//# sourceMappingURL=476.692b39f5.chunk.js.map