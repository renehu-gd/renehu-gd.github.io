"use strict";(self.webpackChunktfin_ui_project_template=self.webpackChunktfin_ui_project_template||[]).push([[363],{1368:function(e,t,n){n.r(t);var o=n(2672),s=n.n(o),r=n(1250),i=n(2263),a=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),s(e),r(e),i(e)}))},l=function(e){var t=e;t.namespace="/v1/api/gbr/";t.get("config",(function(){return{hoop:"9AM-6PM",isAgentOnline:!1,ewt:10,isLeaveAgentMessageEnabled:!0,leaveAgentMessage:"Please leave a message and we will get back to you as soon as we can.",userInactiveInterval:10,isSuccess:!0,errors:void 0}}));t.post("leaveagentmessage",(function(){return{isSuccess:!0,errors:void 0}}))},h=function(e){l(e)},c=n(5861),u=n(1413),d=n(4925),w=n(5671),g=n(3144),p=n(9340),f=n(5716),v=n(7757),C=n.n(v),S=n(1694),x=n.n(S),m=n(7961),W=n(2249),Z=n(1386),M=n(6750),y=n(5989),b=(n(2336),n(184)),E=["contextCls"],k=["contextCls"],P=["contextCls"],L=["contextCls"],j=["contextCls"],I=["isAgentOnline","isSuccess","errors"],O=function(e){(0,p.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,w.Z)(this,n);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={shouldShowChooseOptionWindow:!1,shouldShowErrorPage:!1,shouldShowHoopWindow:!1,shouldShowLeaveMessageWindow:!1,shouldShowMessageSentWindow:!1},e.renderHoopWindow=function(){var t=e.props,n=t.contextCls,o=(0,d.Z)(t,E),s=e.state.chatConfigs;return(0,b.jsx)(Z.Z,(0,u.Z)((0,u.Z)({contextCls:x()(e.baseCls,n),onLeaveMessage:e.handleLeaveMessage},o),s))},e.renderChooseOptionWindow=function(){var t=e.props,n=t.contextCls,o=(0,d.Z)(t,k),s=e.state.chatConfigs;return(0,b.jsx)(m.Z,(0,u.Z)((0,u.Z)({contextCls:x()(e.baseCls,n)},o),s))},e.renderErrorPage=function(){var t=e.props,n=t.contextCls,o=(0,d.Z)(t,P);return(0,b.jsx)(W.Z,(0,u.Z)({contextCls:x()(e.baseCls,n),icon:"WarningAlert",windowTitle:"Chat With an agent",headText:"There was a problem connecting to chat support",subText:"Please try again later."},o))},e.renderLeaveMessageWindow=function(){var t=e.props,n=t.contextCls,o=(0,d.Z)(t,L),s=e.state,r=s.chatConfigs,i=s.userInfo;return(0,b.jsx)(M.Z,(0,u.Z)((0,u.Z)((0,u.Z)({contextCls:x()(e.baseCls,n),onMessageSent:e.handleMessageSent},o),r),i))},e.renderMessageSentWindow=function(){var t=e.props,n=t.contextCls,o=(0,d.Z)(t,j);return(0,b.jsx)(W.Z,(0,u.Z)({contextCls:x()(e.baseCls,n),icon:"Success",headText:"Message sent",subText:"We will get back to you as soon as we can."},o))},e.handleLeaveMessage=function(){e.setState({shouldShowHoopWindow:!1,shouldShowLeaveMessageWindow:!0})},e.handleMessageSent=function(){e.setState({shouldShowLeaveMessageWindow:!1,shouldShowMessageSentWindow:!0})},e.baseCls="web-chat-module",e}return(0,g.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.shouldShowChooseOptionWindow,n=e.shouldShowErrorPage,o=e.shouldShowHoopWindow,s=e.shouldShowLeaveMessageWindow,r=e.shouldShowMessageSentWindow;return(0,b.jsxs)(b.Fragment,{children:[t&&this.renderChooseOptionWindow(),o&&this.renderHoopWindow(),n&&this.renderErrorPage(),s&&this.renderLeaveMessageWindow(),r&&this.renderMessageSentWindow()]})}},{key:"componentDidMount",value:function(){this.setContainerElementStyle(),this.fetchConfig(),this.getUserInfo()}},{key:"componentWillUnmount",value:function(){this.restoreContainerElementStyle()}},{key:"getUserInfo",value:function(){this.setState({userInfo:{accountIdentifier:"10863a4e-4a14-496f-8b7a-e3efd573a995",email:"test@gmail.com"}})}},{key:"fetchConfig",value:function(){var e=(0,c.Z)(C().mark((function e(){var t,n,o,s,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,y.Z.getChatConfig();case 4:n=e.sent,o=n.isAgentOnline,s=n.isSuccess,n.errors,r=(0,d.Z)(n,I),t.chatConfigs=r,o?(t.shouldShowChooseOptionWindow=!0,this.setState({shouldShowChooseOptionWindow:!0})):t.shouldShowHoopWindow=!0,s||(t.shouldShowErrorPage=!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.shouldShowErrorPage=!0;case 14:return e.prev=14,this.setState(t),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"setContainerElementStyle",value:function(){var e=this.props.containerElement;e&&(this.setState({originContainerElementPosition:e.style.position}),e.style.position="relative")}},{key:"restoreContainerElementStyle",value:function(){var e=this.props.containerElement,t=this.state.originContainerElementPosition;e&&t&&(e.style.position=t)}}]),n}(o.PureComponent),T=O;window.server&&"function"===typeof window.server.shutdown&&window.server.shutdown(),window.server=(0,i.Z)({routes:function(){h(this)}});var A=document.getElementById("root");r.createRoot(A).render((0,b.jsxs)(s().StrictMode,{children:[(0,b.jsx)("div",{children:"Test Widget Page, when invoke the wiget, we should expose the ChatModule only and set the containerElement to which element in the existing page"}),(0,b.jsx)(T,{containerElement:A})]})),a()}}]);
//# sourceMappingURL=363.152ec362.chunk.js.map